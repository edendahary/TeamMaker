<div class="container p-4">
  <div class="row pt-4 mb-3">
    <div class="col-md-6">
      <h4>Player Portal  {{data && data.length ? '(' + data.length + ')' : ''}}</h4>
    </div>
    <div class="col-md-6 text-end">
      <button class="btn btn-outline-success" (click)="openModal()">
        Add New
      </button>
    </div>
  </div>
  @if (data) {
  @if (data.length !== 0) {
  <div class="row">
    @for (item of data; track $index) {
    <div class="col-md-4 p-2">
      <div class="card">
        <div class="card-header">
          <div class="row">
            <div class="col-6 overflow-hidden text-nowrap text-truncate">
              {{ item.name }}
            </div>
            <div class="col-6 text-end">
              {{ item.mobile }}
            </div>
          </div>
        </div>
        <div class="card-body">
          <p>{{ item.city }}</p>
          <div class="row">
            <div class="col-4">Accuracy: {{ item.accuracy }}</div>
            <div class="col-4">Pass: {{ item.pass }}</div>
            <div class="col-4">Shot: {{ item.shot }}</div>
            <div class="row mt-2">
              <div class="col-4">Pace: {{ item.pace }}</div>
              <div class="col-4">
                Dribbling: {{ item.dribbling }}
              </div>
              <div class="col-4">Attack: {{ item.attack }}</div>
            </div>
            <div class="row mt-2">
              <div class="col-4">Defense: {{ item.defense }}</div>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="row">
            <div class="col-6 p-2">
              <small> Overall Rating: {{ item.overall_grade }}</small>
            </div>
            <div class="col-6 text-end p-2">
              <button
                type="button"
                class="btn btn-sm btn-primary me-1"
                (click)="onEdit(item)"
              >
                Edit
              </button>
              <button
                type="button"
                class="btn btn-sm btn-danger"
                (click)="onDelete(item)"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
  } @else {
  <div class="row">
    <div class="col-12 p-4 text-center">
      <p>No Record Found. Create New Record</p>
    </div>
  </div>
  }
}
</div>

<div class="modal" id="myModal" #myModal>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Create New Player</h4>
        <button
          type="button"
          class="btn-close"
          (click)="closeModel()"
          data-bs-dismiss="modal"
        ></button>
      </div>

      <div class="modal-body">
        <form ngNativeValidate #form>
          <div class="row">
            <div class="col-8">
              <label for="">Name</label>
              <input
                type="text"
                [(ngModel)]="PlayerObj.name"
                name="name"
                placeholder="Enter Name"
                class="form-control"
                required
              />
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <label for="">Mobile</label>
              <input
                type="text"
                [(ngModel)]="PlayerObj.mobile"
                name="mobile"
                placeholder="Enter Mobile"
                class="form-control"
                required
              />
            </div>
            <div class="col-6">
              <label for="">City</label>
              <input
                type="text"
                [(ngModel)]="PlayerObj.city"
                name="city"
                class="form-control"
                placeholder="Enter City"
                required
              />
            </div>
          </div>
          <div class="row">
            <div class="col-4">
              <label for="">Dribbling</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.dribbling"
                name="dribbling"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Shot</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.shot"
                name="shot"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Pace</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.pace"
                name="pace"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Pass</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.pass"
                name="pass"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Accuracy</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.accuracy"
                name="accuracy"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="1-10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Attack</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.attack"
                name="attack"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
            <div class="col-4">
              <label for="">Defense</label>
              <input
                type="number"
                [(ngModel)]="PlayerObj.defense"
                name="defense"
                class="form-control"
                placeholder="1-10"
                min="1"
                max="10"
                step="0.1"
                required
              />
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-12">
                <label for="">Address</label>
                <textarea name="address" id="" cols="30" rows="3" [(ngModel)]="PlayerObj.address" class="form-control"></textarea>
            </div>
        </div> -->
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="closeModel()">
          Close
        </button>
        @if (PlayerObj._id == null) {
        <button
          type="button"
          class="btn btn-primary"
          (click)="form.checkValidity() ? savePlayer() : errorMessage()"
        >
          Save Player
        </button>
        } @else {<button
          type="button"
          class="btn btn-success"
          (click)="updatePlayer(PlayerObj)"
        >
          Update Player</button
        >}
      </div>
    </div>
  </div>
  </div>

  <div class="modal" id="modelError" #modelError style="margin-top: 150px">
    <div class="modal-dialog text-center">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Message</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            (click)="closeError()"
          ></button>
        </div>
        <div class="modal-body">
          {{ Message }}
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
            (click)="closeError()"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
